<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>From Server-side to Browser-based Shiny Apps and Back Again • peeky</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="behind-the-scenes_files/libs/quarto-html/popper.min.js"></script><script src="behind-the-scenes_files/libs/quarto-html/tippy.umd.min.js"></script><link href="behind-the-scenes_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="behind-the-scenes_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="From Server-side to Browser-based Shiny Apps and Back Again">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">peeky</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/behind-the-scenes.html">From Server-side to Browser-based Shiny Apps and Back Again</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/coatless-rpkg/peeky/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1></h1>
      <p class="subtitle">Understanding Shiny to Shinylive Conversion and Source Extraction</p>
      <p class="author">James Joseph Balamuta</p>


      <small class="dont-index">Source: <a href="https://github.com/coatless-rpkg/peeky/blob/main/vignettes/behind-the-scenes.qmd" class="external-link"><code>vignettes/behind-the-scenes.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <header id="title-block-header" class="quarto-title-block"><h1 class="title">From Server-side to Browser-based Shiny Apps and Back Again</h1></header><p><a href="https://shiny.posit.co/py/docs/shinylive.html" class="external-link">Shinylive</a> represents a paradigm shift in how Shiny applications are deployed and executed. Instead of running on a <strong>computational</strong> server, these applications execute entirely within a web browser after being downloaded. This vignette explores the transformation process from a traditional Shiny application to a Shinylive application and explains how tools like <a href="https://github.com/coatless-rpkg/peeky" class="external-link"><code>peeky</code></a> can extract the source code from these browser-based applications.</p>
<section class="section level3"><h3 id="the-traditional-shiny-model">The Traditional Shiny Model<a class="anchor" aria-label="anchor" href="#the-traditional-shiny-model"></a>
</h3>
<p>In a traditional Shiny application:</p>
<ol type="1">
<li>Source code resides on a <strong>computational</strong> server</li>
<li>R and/or Python are installed and running on the server</li>
<li>Users interact with the app through their browser, which communicates and processes the interaction on the server.</li>
<li>App code remains <strong>private</strong> and <strong>inaccessible</strong> to end users</li>
</ol>
<p>For example, consider a template for an R Shiny application:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Traditional Shiny app structure</span></span>
<span><span class="co"># app.R or (ui.R/server.R)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">fluidPage</span><span class="op">(</span></span>
<span>  <span class="co"># UI elements</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Server logic</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">shinyApp</span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></code></pre></div>
<p>Once deployed, the server executes the application code and sends the results back to the user’s browser. This code is <strong>not</strong> accessible to the user since it runs on the server’s R process.</p>
</section><section class="section level3"><h3 id="the-shinylive-transformation">The Shinylive Transformation<a class="anchor" aria-label="anchor" href="#the-shinylive-transformation"></a>
</h3>
<p>One of the key features of Shinylive is the ability to convert traditional Shiny applications to run entirely in the browser. This transformation involves arguably three key steps: Code Preparation, Conversion Process, and Browser Deployment.</p>
<section class="level3"><h4 id="step-1-code-preparation">Step 1: Code Preparation<a class="anchor" aria-label="anchor" href="#step-1-code-preparation"></a>
</h4>
<p>The first step in converting to Shinylive involves preparing your Shiny application code. The core application logic remains largely unchanged, but there are some key considerations:</p>
<ul>
<li>All dependencies must be available in WebAssembly format
<ul>
<li>Check if the R package is in the <a href="https://repos.r-wasm.org" class="external-link">webR package repository</a> (mobile intensive)</li>
<li>See if the Python package is apart of the <a href="https://pyodide.org/en/stable/usage/packages-in-pyodide.html" class="external-link">built-in Pyodide packages</a> or has a <strong>pure Python</strong> implementation that can be used directly from PyPI.</li>
</ul>
</li>
<li>File paths need to be adjusted for browser context</li>
<li>External resources must be properly bundled</li>
</ul></section><section class="level3"><h4 id="step-2-conversion-process">Step 2: Conversion Process<a class="anchor" aria-label="anchor" href="#step-2-conversion-process"></a>
</h4>
<p>The conversion to Shinylive is automated by the</p>
<ol type="1">
<li>
<p><strong>File Bundling</strong>: All application files are collected and bundled together:</p>
<ul>
<li>R/Python source code</li>
<li>Data files</li>
<li>Static assets (images, CSS, etc.)</li>
</ul>
</li>
<li>
<p><strong>Metadata Generation</strong>: A <code>app.json</code> file is created containing:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">{</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"app.R"</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"library(shiny)</span><span class="ch">\n</span><span class="st">..."</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"text"</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">{</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"data.csv"</span><span class="fu">,</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"col1,col2</span><span class="ch">\n</span><span class="st">..."</span><span class="fu">,</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"text"</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="ot">]</span></span></code></pre></div>
</li>
<li>
<p><strong>Runtime Preparation</strong>:</p>
<ul>
<li>For R: WebR environment is configured</li>
<li>For Python: Pyodide environment is set up</li>
</ul>
</li>
</ol></section><section class="level3"><h4 id="step-3-browser-deployment">Step 3: Browser Deployment<a class="anchor" aria-label="anchor" href="#step-3-browser-deployment"></a>
</h4>
<p>The converted application now runs entirely in the browser:</p>
<ol type="1">
<li>WebR/Pyodide runtime initializes</li>
<li>Application files are loaded from <code>app.json</code>
</li>
<li>UI renders and connects to a local runtime</li>
<li>All computation happens client-side</li>
</ol></section></section><section class="section level3"><h3 id="source-code-transparency">Source Code Transparency<a class="anchor" aria-label="anchor" href="#source-code-transparency"></a>
</h3>
<p>Unlike traditional Shiny applications, Shinylive apps are inherently transparent. This transparency is a fundamental characteristic due to several factors:</p>
<ol type="1">
<li>
<strong>Client-Side Execution</strong>: All code must be available in the browser</li>
<li>
<strong>Bundled Resources</strong>: All files are packaged in accessible formats</li>
<li>
<strong>No Server Privacy</strong>: No server-side code protection exists</li>
</ol></section><section class="section level3"><h3 id="extracting-source-code-with-peeky">Extracting Source Code with <code>peeky</code>
<a class="anchor" aria-label="anchor" href="#extracting-source-code-with-peeky"></a>
</h3>
<p>The <code>peeky</code> package leverages this transparency to extract source code from Shinylive applications. Here’s how it works:</p>
<section class="level3"><h4 id="detection">Detection<a class="anchor" aria-label="anchor" href="#detection"></a>
</h4>
<p>TODO: Clarify</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># URL of the Shinylive application</span></span>
<span><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">""</span></span>
<span></span>
<span><span class="co"># Auto-detect and handle both standalone and Quarto-embedded apps</span></span>
<span><span class="fu">peeky</span><span class="fu">::</span><span class="fu"><a href="../reference/peek_shinylive_app.html">peek_shinylive_app</a></span><span class="op">(</span><span class="va">url</span><span class="op">)</span></span></code></pre></div>
</section><section class="level3"><h4 id="content-retrieval">Content Retrieval<a class="anchor" aria-label="anchor" href="#content-retrieval"></a>
</h4>
<p>TODO: Clarify</p>
<ol type="1">
<li>Downloads the webpage or app.json</li>
<li>Identifies Shinylive components</li>
<li>Extracts embedded code and resources</li>
</ol></section><section class="level3"><h4 id="file-reconstruction">File Reconstruction<a class="anchor" aria-label="anchor" href="#file-reconstruction"></a>
</h4>
<p>By default, extracted content is reconstructed into runnable applications that have the directory structure of a standalone app with all of its components. If the application is embedded in a Quarto document, the extracted content can consist of one or more Shiny applications and, thus, is reconstructed into a into subdirectories, e.g. <code>app_1</code>, <code>app_2</code>, etc. Or, the content can be reconstructed into a new Quarto document containing just the applications.</p>
<p>This can be done by specifying the <code>output_format</code> argument in <code><a href="../reference/peek_quarto_shinylive_app.html">peek_quarto_shinylive_app()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract to directory structure</span></span>
<span><span class="fu">peeky</span><span class="fu">::</span><span class="fu"><a href="../reference/peek_quarto_shinylive_app.html">peek_quarto_shinylive_app</a></span><span class="op">(</span><span class="va">url</span>, output_format <span class="op">=</span> <span class="st">"app-dir"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or create a new Quarto document</span></span>
<span><span class="fu">peeky</span><span class="fu">::</span><span class="fu"><a href="../reference/peek_quarto_shinylive_app.html">peek_quarto_shinylive_app</a></span><span class="op">(</span><span class="va">url</span>, output_format <span class="op">=</span> <span class="st">"quarto"</span><span class="op">)</span></span></code></pre></div>
</section></section><section class="section level3"><h3 id="security-implications">Security Implications<a class="anchor" aria-label="anchor" href="#security-implications"></a>
</h3>
<p>This transparency has important implications for developers:</p>
<ol type="1">
<li>
<strong>No Code Privacy</strong>: All source code is accessible to users</li>
<li>
<strong>Data Visibility</strong>: Bundled datasets are accessible</li>
<li>
<strong>API Keys</strong>: Never include sensitive credentials</li>
<li>
<strong>Business Logic</strong>: Proprietary algorithms are visible</li>
</ol></section><section class="section level3"><h3 id="best-practices">Best Practices<a class="anchor" aria-label="anchor" href="#best-practices"></a>
</h3>
<p>When developing Shinylive applications:</p>
<ol type="1">
<li>
<strong>Assume Transparency</strong>: Design with the understanding that code is visible</li>
<li>
<strong>Handle Sensitive Data</strong>: Process sensitive data server-side if needed</li>
<li>
<strong>License Clearly</strong>: Include clear licensing terms</li>
<li>
<strong>Consider Hybrid Approaches</strong>: Use traditional Shiny for sensitive components and offload non-sensitive parts to Shinylive.</li>
</ol></section><section class="section level3"><h3 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h3>
<p>The transformation from traditional Shiny to Shinylive represents a fundamental shift in how web applications are delivered. While this brings advantages in deployment and accessibility, it also requires developers to embrace transparency and adjust their development practices accordingly. Tools like <code>peeky</code> help demonstrate this transparency and can assist in understanding how Shinylive applications work.</p>
</section><section class="section level3"><h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<ol type="1">
<li><a href="https://shiny.posit.co/py/docs/shinylive.html" class="external-link">Shinylive overview</a></li>
<li>
<a href="https://docs.r-wasm.org/webr/latest/" class="external-link">webR Documentation</a>
<ul>
<li><a href="https://repos.r-wasm.org" class="external-link">webR Package Repository</a></li>
</ul>
</li>
<li>
<a href="https://pyodide.org/en/stable/" class="external-link">Pyodide Documentation</a>
<ul>
<li><a href="https://pyodide.org/en/stable/usage/packages-in-pyodide.html" class="external-link">Pyodide built-in packages</a></li>
</ul>
</li>
<li><a href="https://github.com/quarto-ext/shinylive" class="external-link">Quarto Shinylive Extension</a></li>
<li><a href="https://github.com/georgestagg/shiny-standalone-webr-demo" class="external-link">Shiny Standalone webR Demo</a></li>
</ol></section><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'light-border',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config);
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by James Joseph Balamuta.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
